<div class="actions-grid">
  <div class="grid-item grid-item--review">
    <ng-container *ngIf="comments$ | async as comments">
      <div class="grid-item__icon">
        <img src="assets/images/star.png" alt="" />
      </div>
      <ng-container *ngIf="comments.length; else default">
        <p class="grid-item__title">{{ comments.length }}人がレビュー済</p>
      </ng-container>
      <ng-template #default>
        <p class="grid-item__title">
          まだありません
        </p>
      </ng-template>
      <button
        class="grid-item__btn grid-item__btn--review"
        (click)="openReviewDialog()"
      >
        参加経験あり
      </button>
    </ng-container>
  </div>

  <div class="grid-item grid-item--like">
    <div class="grid-item__icon">
      <mat-icon color="accent">favorite</mat-icon>
    </div>
    <p class="grid-item__title">{{ article.likeCount }}人がいいね</p>

    <ng-container *ngIf="isliked; else notYet">
      <div (click)="unlikeArticle(uid)" class="grid-item__btn">
        <mat-icon color="accent">favorite</mat-icon>
        <span @fadeup>liked!</span>
      </div>
    </ng-container>

    <ng-template #notYet>
      <div
        (click)="likeArticle(uid)"
        class="grid-item__btn"
        matTooltip="いいね！"
      >
        <mat-icon>favorite_border</mat-icon>
      </div>
    </ng-template>
  </div>

  <div class="grid-item grid-item--pin">
    <div class="grid-item__icon">
      <mat-icon color="warn">push_pin</mat-icon>
    </div>
    <p class="grid-item__title">{{ article.pinCount }}人がピンどめ</p>

    <ng-container *ngIf="isPinned; else notPin">
      <div (click)="unpinnedArticle(uid)" class="grid-item__btn">
        <mat-icon @bounce color="warn">push_pin</mat-icon>
      </div>
    </ng-container>

    <ng-template #notPin>
      <div
        mat-flat-button
        (click)="pinnedArticle(uid)"
        class="grid-item__btn"
        matTooltip="気になる"
      >
        <mat-icon class="grid-item__pin-icon">push_pin</mat-icon>
      </div>
    </ng-template>
  </div>

  <div class="grid-item grid-item--share">
    <div class="grid-item__icon">
      <mat-icon>share</mat-icon>
    </div>
    <p class="grid-item__title">SNSでシェア</p>

    <div class="grid-item__btn grid-item__btn--share" matTooltip="シェア">
      <a
        href="https://twitter.com/share?ref_src=twsrc%5Etfw"
        class="actions__share"
        data-hashtags="eduu"
        data-show-count="false"
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#212121"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
          ></path>
        </svg>
      </a>

      <script
        async
        src="https://platform.twitter.com/widgets.js"
        charset="utf-8"
      ></script>
    </div>
  </div>
</div>
