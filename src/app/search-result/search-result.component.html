<div class="container">
  <div class="result">
    <ng-container *ngIf="searchQuery">
      <div class="result-header">
        <h2 class="result-header__keyword">
          <mat-icon>search</mat-icon>検索ワード：<span
            class="result-header__keyword result-header__keyword--col"
          >
            {{ searchQuery }}</span
          >
        </h2>
      </div>
    </ng-container>
    <div class="result-list">
      <ng-container *ngIf="result?.hits.length">
        <h2 class="result-list__hits">
          結果： {{ result?.nbHits }} 件見つかりました
        </h2>
      </ng-container>
      <div class="result-list__wrap" *ngIf="articles.length > 0; else notFound">
        <ul *ngFor="let article of articles">
          <li class="result-list__item">
            <div class="result-list__thumbnail">
              <a routerLink="/article-detail/{{ article.id }}">
                <img src="{{ article.thumbnailURL }}" alt="" />
                <div class="result-list__icon">
                  <mat-icon>exit_to_app</mat-icon>
                </div></a
              >
            </div>

            <div class="result-list__body">
              <a routerLink="/article-detail/{{ article.id }}"
                >{{ article.title }}
                <p class="result-list__body result-list__body--dark">
                  {{ article.name }}
                </p></a
              >
            </div>

            <div class="result-list__footer">
              <mat-icon>today</mat-icon>
              <p>{{ article.updatedAt | date: 'yyyy/MM/dd' }}</p>
            </div>
          </li>
          <mat-divider></mat-divider>
        </ul>
      </div>

      <div
        infiniteScroll
        [infiniteScrollDistance]="1"
        [infiniteScrollThrottle]="100"
        (scrolled)="searchArticles()"
      ></div>

      <ng-template #notFound>
        <figure class="not-found">
          <img src="assets/images/search-01.png" alt="" />
        </figure>
        <p>
          一致するアイテムがありませんでした🙏
        </p>
        <p>
          キーワードを変えて試してみるか、フィルターを削除してみてください。
        </p>
      </ng-template>

      <ng-container *ngIf="uiService.loading">
        <mat-progress-spinner
          mode="indeterminate"
          color="primary"
          [diameter]="40"
        ></mat-progress-spinner>
      </ng-container>
    </div>
  </div>
</div>
