<div class="container">
  <div class="result-header">
    <h2 class="result-header__keyword">
      <mat-icon>search</mat-icon>検索ワード：<span
        class="result-header__keyword result-header__keyword--col"
      >
        {{ searchQuery || categoryFilter || tagFilter }}</span
      >
    </h2>
    <mat-divider></mat-divider>
  </div>

  <div class="result">
    <ng-container *ngIf="result?.hits.length || articles">
      <h2 class="result__hits">全部で {{ result?.nbHits }} 件見つかりました</h2>
    </ng-container>
    <div *ngIf="articles.length > 0; else notFound" class="grid">
      <ul *ngFor="let article of articles">
        <li routerLink="/article-detail/{{ article.id }}" class="article">
          <figure @fade class="article__thumbnail">
            <img [src]="article.thumbnailURL" alt="" />
          </figure>

          <div class="article__body">
            <div class="article__top">
              <h3 class="article__name">{{ article.name }}</h3>
              <h4 class="article__title">{{ article.title }}</h4>
            </div>

            <div class="article__description">
              <p class="article__date">
                {{ article.createdAt | date: 'yyyy/MM/dd' }} 追加
              </p>
              <button class="article__category">
                <p class="article__category-text">{{ article.category }}</p>
              </button>
              <span class="article__spacer"></span>
              <p class="article__like">
                ❤️<span>{{ article.likeCount }}</span>
              </p>
              <p class="article__pin">
                📌<span>{{ article.pinCount }}</span>
              </p>
            </div>
          </div>
        </li>
      </ul>
    </div>

    <div
      infiniteScroll
      [infiniteScrollDistance]="1"
      [infiniteScrollThrottle]="100"
      (scrolled)="searchArticles()"
    ></div>

    <ng-template #notFound>
      <figure class="not-found">
        <img src="assets/images/search-01.png" alt="" />
      </figure>
      <p>
        一致するアイテムがありませんでした🙏
      </p>
      <p>
        キーワードを変えて試してみるか、フィルターを削除してみてください。
      </p>
    </ng-template>

    <ng-container *ngIf="uiService.loading">
      <mat-progress-spinner
        mode="indeterminate"
        color="primary"
        [diameter]="40"
      ></mat-progress-spinner>
    </ng-container>
  </div>
</div>
